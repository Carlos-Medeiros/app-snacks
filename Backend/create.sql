create table tb_category (id int8 generated by default as identity, name varchar(255), primary key (id));
create table tb_category_product (category_id int8 not null, product_id int8 not null, primary key (category_id, product_id));
create table tb_client (id int8 generated by default as identity, email varchar(255), name varchar(255), password varchar(255), phones varchar(255), primary key (id));
create table tb_delivery_tax (id int8 generated by default as identity, delivery_tax float8 not null, primary key (id));
create table tb_deliveryman (id int8 generated by default as identity, email varchar(255), name varchar(255), password varchar(255), phones varchar(255), status int4, primary key (id));
create table tb_discount_coupon (id int8 generated by default as identity, code varchar(255), discount_amount float8, minimun_discount_amount float8, primary key (id));
create table tb_email_validation (email varchar(255) not null, number_validation int4, primary key (email));
create table tb_order (id int8 generated by default as identity, address varchar(255), client_email varchar(255), coupon boolean not null, delivery boolean not null, latitude float8 not null, longitude float8 not null, moment timestamp, paymant_to_card boolean not null, status int4, status_client int4, primary key (id));
create table tb_order_delivery_tax (order_id int8 not null, delivery_tax_id int8 not null, primary key (order_id, delivery_tax_id));
create table tb_order_discount_coupon (order_id int8 not null, discount_coupon_id int8 not null, primary key (order_id, discount_coupon_id));
create table tb_order_product (order_id int8 not null, product_id int8 not null);
create table tb_order_user (order_id int8 not null, user_id int8 not null, primary key (order_id, user_id));
create table tb_owner (id int8 generated by default as identity, email varchar(255), name varchar(255), password varchar(255), primary key (id));
create table tb_product (id int8 generated by default as identity, description varchar(255), discount boolean not null, image_uri varchar(255), inventory boolean not null, name varchar(255), percentage_discount float8, price float8 not null, primary key (id));
create table tb_used_coupon (email varchar(255) not null, used_code varchar(255), primary key (email));
create table tb_user_product (user_id int8 not null, product_id int8 not null, primary key (user_id, product_id));
create table tb_working_day (id int8 generated by default as identity, closing_time int4, is_open boolean not null, name varchar(255), opening_time int4, primary key (id));
alter table if exists tb_category_product add constraint FKm36f98vxumh7qxnqlidi4yjm3 foreign key (product_id) references tb_product;
alter table if exists tb_category_product add constraint FKqj4a2ulngghmpvopkvsyocsne foreign key (category_id) references tb_category;
alter table if exists tb_order_delivery_tax add constraint FK8b0t6jo2c8adgkw6jlrqd88of foreign key (delivery_tax_id) references tb_delivery_tax;
alter table if exists tb_order_delivery_tax add constraint FKgvy9cis4kt3x6s71lofqvqvsa foreign key (order_id) references tb_order;
alter table if exists tb_order_discount_coupon add constraint FK976k1r1t7am34s4whoq1at26y foreign key (discount_coupon_id) references tb_discount_coupon;
alter table if exists tb_order_discount_coupon add constraint FKc01pv9si0uoo6ekx0d2u0m1no foreign key (order_id) references tb_order;
alter table if exists tb_order_product add constraint FKsu03ywlcvyqg5y78qey2q25lc foreign key (product_id) references tb_product;
alter table if exists tb_order_product add constraint FK40anaevs16kmc2tbh7wc511fq foreign key (order_id) references tb_order;
alter table if exists tb_order_user add constraint FKjo1smp2llashdhbuhxj6dr5ww foreign key (user_id) references tb_client;
alter table if exists tb_order_user add constraint FK6lcijqsvx1lcdv1lun593qyps foreign key (order_id) references tb_order;
alter table if exists tb_user_product add constraint FK7ntfjplswuos21sqoeg5g4u7r foreign key (product_id) references tb_product;
alter table if exists tb_user_product add constraint FKd5o0akuic9ki4gldds5n5x24d foreign key (user_id) references tb_client;
